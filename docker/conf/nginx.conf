server {
    listen 8081;
    server_name visercom.grupocestel.local;

    # Redireccion para /backend/ a 10.0.3.200:8080
    location /backend/ {
        proxy_pass http://10.0.3.200:8080/backend/;
    }

    # Redireccion para todas las demas rutas
    location / {
        proxy_pass http://10.0.3.200:5001/;
    }
}

server {
    listen 4438 ssl;
    server_name visercom.grupocestel.local;
    ssl_certificate /etc/nginx/certs/cestel2025.crt;
    ssl_certificate_key /etc/nginx/certs/cestel2025.key;

    # Redireccion para /backend/auth/login a 10.0.3.200:8443 con HTTPS
    location /backend/auth/login {
        proxy_pass http://10.0.3.200:8080/backend/auth/login;
        proxy_ssl_certificate /etc/nginx/certs/cestel2025.crt;
        proxy_ssl_certificate_key /etc/nginx/certs/cestel2025.key;
        proxy_ssl_verify off;  # Desactiva la verificacion SSL si es necesario
    }
	
	location /backend/authWeb/login {
        proxy_pass http://10.0.3.200:8080/backend/authWeb/login;
        proxy_ssl_certificate /etc/nginx/certs/cestel2025.crt;
        proxy_ssl_certificate_key /etc/nginx/certs/cestel2025.key;
        proxy_ssl_verify off;  # Desactiva la verificacion SSL si es necesario
    }

    # Redireccion para /backend/ a 10.0.3.200:8080
    location /backend/ {
        proxy_pass http://10.0.3.200:8080/backend/;
    }

    # Redireccion para todas las demas rutas
    location / {
        proxy_pass http://10.0.3.200:5001/;
    }
}
